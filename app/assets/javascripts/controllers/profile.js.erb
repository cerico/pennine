scenic.controller("ProfileController", [ '$scope','$location','$http','glossop', function($scope,$location,$http,glossop) {

    function getUser() {
        glossop.getUser()
            .success(function (data) {
                    $scope.user = data
    $scope.bookmarkchoice = "showfaved"
    $scope.distance = 0
    $scope.notifications = 0
    console.log($scope.user.bookmarks.length)
    console.log($scope.notifications)
    for (var i= 0; i< $scope.user.bookmarks.length; i++){

      if ($scope.user.bookmarks[i].completed === true){
        console.log($scope.user.bookmarks[i].trail.distance)
        $scope.distance += $scope.user.bookmarks[i].trail.distance
      }
    }
  //   if ($scope.user.loggedinuser && $scope.user.id === $scope.user.loggedinuser.id) {
  //     $scope.bookmarkchoice = "showfaved"
  //     $scope.loggedinstate = "thatsme"
  //   }
  //   else{
  //     $scope.bookmarkchoice = "showcompleted"
  //   }

  for (var i = 0; i<$scope.user.trails;i++){
    if ($scope.user.trails[i].updated_at < current_user.updated_at) {
      $scope.notifications += 1

    }
  }
            })
            .error(function (error) {
                $scope.status = 'Unable to load customer data: ' + error.message;
            });
    }

   getUser()

  console.log(current_user.updated_at)
  




  $scope.changeBookmarkView = function (state) {
    if (state == 'added'){
      $scope.bookmarkchoice = "showadded"
      $(".seeadded ").addClass("current")
      $(".seecompleted ").removeClass("current")
      $(".seefaved ").removeClass("current")

    }
    else if (state == 'faved') {
      $scope.bookmarkchoice = "showfaved"
      $(".seecompleted ").removeClass("current")
      $(".seefaved ").addClass("current")
      $(".seeadded ").removeClass("current")
    }
    else if (state == 'completed') {
      $scope.bookmarkchoice = "showcompleted"
      $(".seefaved ").removeClass("current")
      $(".seecompleted ").addClass("current")
      $(".seeadded ").removeClass("current")
    }
  }



}])